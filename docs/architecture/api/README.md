# API Architecture

## 概要

Furumaru APIは、**モジュラーモノリス**アーキテクチャを採用し、各モジュールが**レイヤードアーキテクチャ**パターンで実装されています。これにより、エンジニアが実装しやすく保守しやすい設計を実現しています。

## アーキテクチャパターン

### モジュラーモノリス構成
```
api/
├── cmd/                    # エントリポイント
│   ├── gateway/           # APIゲートウェイ
│   ├── media/             # メディア機能
│   └── messenger/         # メッセージング機能
├── internal/              # ビジネスロジック（モジュール）
│   ├── gateway/           # ゲートウェイモジュール
│   ├── user/              # ユーザー管理モジュール
│   ├── store/             # EC機能モジュール
│   ├── media/             # メディア管理モジュール
│   └── messenger/         # 通知・メッセージングモジュール
└── pkg/                   # 共通パッケージ
```

### レイヤードアーキテクチャ（各モジュール内）
```
internal/{module}/
├── api/                   # プレゼンテーション層（HTTPハンドラー）
├── service/               # ビジネスロジック層
├── database/              # データアクセス層
└── entity/                # エンティティ・ドメインモデル
```

## 特徴

- **単一デプロイ**: 全モジュールが1つのバイナリとしてデプロイ
- **モジュール分離**: 機能ごとに明確に分離された実装
- **レイヤード構成**: エンジニアにとって理解しやすいパターン
- **共通基盤**: 認証、エラーハンドリング、ログ等は共通化

## 詳細設計

APIの詳細設計・内部仕様については以下を参照：
- **[APIサービス概要](./api-services-overview.md)** - 各モジュール詳細
- **[データベース設計](./database-design.md)** - データベース設計
- **[APIドキュメントパターン](./documentation-patterns.md)** - APIドキュメントパターン

