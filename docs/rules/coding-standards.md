# コーディング規約

## Go言語（バックエンド）

### 基本ルール
- `gofmt`, `goimports`でフォーマットを統一
- `golangci-lint`のルールに従う
- パッケージ名は短く、明確に
- 構造体のフィールドは大文字から始める（外部公開）
- プライベートな関数・変数は小文字から始める

### 命名規則
- **関数**: `CamelCase`（公開）、`camelCase`（非公開）
- **変数**: `camelCase`
- **定数**: `SCREAMING_SNAKE_CASE`または`CamelCase`
- **ファイル**: `snake_case.go`
- **パッケージ**: 小文字、短く

### ディレクトリ構造
```
/api/internal/{service}/
├── api/              # HTTPハンドラー
├── database/         # データアクセス層
├── entity/           # ドメインエンティティ
├── service/          # ビジネスロジック
└── entity/           # エンティティ定義
```

### エラーハンドリング
- エラーは必ず適切に処理する
- `fmt.Errorf`でコンテキストを追加
- カスタムエラータイプを適切に使用
- ログには十分な情報を含める

### テスト
- テストファイルは`*_test.go`
- テーブル駆動テストを使用
- モックは`gomock`で生成
- テストカバレッジは80%以上を目標

## フロントエンド（Vue.js/Nuxt）

### 基本ルール
- Composition APIを使用
- `<script setup>`構文を推奨
- TypeScriptを使用
- ESLint, Prettierでコード品質を保つ

### 命名規則
- **コンポーネント**: `PascalCase.vue`
- **ページ**: `kebab-case.vue`
- **変数・関数**: `camelCase`
- **定数**: `SCREAMING_SNAKE_CASE`

### ディレクトリ構造
```
/web/{app}/
├── components/       # 再利用可能コンポーネント
├── pages/           # ページコンポーネント
├── composables/     # Composition API
├── stores/          # Pinia状態管理
├── middleware/      # ルートミドルウェア
├── plugins/         # プラグイン
└── types/           # 型定義
```

### コンポーネント設計
- 単一責任の原則に従う
- プロップスは適切に型定義
- emitするイベントは明示的に定義
- スロットは適切に命名

### 状態管理
- Piniaストアを使用
- ストアは機能ごとに分割
- 状態の変更は明示的に行う
- 非同期処理はアクションで実装

## 共通ルール

### コメント
- 公開API、複雑なロジックにはコメントを記述
- TODOコメントには期限と担当者を記載
- 日本語コメントも可（ただし、英語推奨）

### Git運用
- コミットメッセージは英語で記述
- プレフィックスを使用（feat:, fix:, refactor: など）
- 1コミット1機能を心がける
- 大きな変更は適切にコミットを分割

### セキュリティ
- 機密情報をハードコードしない
- 環境変数で設定を管理
- SQLインジェクション対策を実施
- XSS対策を実施

### パフォーマンス
- N+1クエリを避ける
- 不要なデータ取得を避ける
- 適切なインデックスを設定
- 画像は適切に圧縮・最適化

### ドキュメント
- APIは OpenAPI/Swagger で定義
- 重要な設計判断は記録
- READMEは最新の状態に保つ
- 新しい開発者向けのセットアップ手順を維持